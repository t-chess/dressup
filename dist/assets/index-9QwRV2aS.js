import{P as e}from"./phaser-CmFXOKba.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t={currentChar:"mom",currentSection:"",mom:{hair:1,hairPreview:1,hairtotal:6,top:1,toptotal:3,bottom:1,bottomtotal:5},gail:{face:1,facetotal:1,hand:1,handtotal:1,hair:1,hairtotal:3,top:1,toptotal:1,bottom:1,bottomtotal:0}};class i extends Phaser.Scene{constructor(){super({key:"Loading"})}preload(){this.load.image("bg","assets/bg.png"),this.add.sprite(640,480,"bg").setPosition(320,240),this.add.graphics().fillStyle(16777215,1).fillRect(50,190,540,180),this.add.text(320,150,"Abigail's sweet homecoming",{font:"36px monospace",fill:"black",backgroundColor:"white"}).setOrigin(.5,.5).setInteractive({cursor:"pointer"}),this.add.text(70,200,"After spending a few years away from her hometown, 19-year-old Abigail is finally visiting to reunite with her beloved mother. As they prepare for a memorable evening together, help them choose the perfect outfits to make this reunion even more special. Let the dress-up fun begin and create unforgettable memories for this heartwarming homecoming!",{font:"18px monospace",fill:"black",lineSpacing:2,align:"center",wordWrap:{width:540,useAdvancedWrap:!0}});let e=this.add.graphics().fillStyle(2236962,1).fillRect(210,395,220,30),t=this.add.graphics(),i=this.add.text(320,400,"Play",{font:"36px monospace",fill:"#fff",backgroundColor:"black"}).setOrigin(.5,.5).setInteractive({cursor:"pointer"});i.on("pointerdown",(()=>this.scene.start("Game"))),i.setVisible(!1),this.load.on("progress",(function(e){t.clear().fillStyle(16777215,1).fillRect(215,400,210*e,20)})),this.load.on("complete",(function(){t.destroy(),e.destroy(),i.setVisible(!0)})),this.load.image("mother","assets/mom.png"),this.load.image("abigail","assets/gail.png"),this.load.image("hairbtn","assets/interface/hairbtn.png"),this.load.image("topsbtn","assets/interface/topsbtn.png"),this.load.image("bottomsbtn","assets/interface/bottomsbtn.png"),this.load.image("rightpanel","assets/interface/rightpanel.png"),this.load.image("arrow","assets/interface/arrow.png"),this.load.image("arrowgail","assets/interface/arrowgail.png"),this.loadSet("hair","mom",!0),this.loadSet("top","mom",!0),this.loadSet("bottom","mom",!0),this.loadSet("hand","gail"),this.loadSet("face","gail"),this.loadSet("hair","gail"),this.loadSet("top","gail")}loadSet(e,i,o){let r=t[i][e+"total"];for(var a=1;a<=r;a++)this.load.image(i+e+a,"assets/"+i+"/"+e+a+".png"),o&&this.load.image(i+e+"preview"+a,"assets/"+i+"/"+e+"preview"+a+".png")}}const o={preview:[{condition:"hairpreview2",who:"mom",text:["welcome back"],qty:1},{condition:"hairpreview4",who:"mom",text:["ah i wish i had curly hair"],qty:1},{condition:"toppreview2",who:"mom",text:["did you miss our little tobacco shop, Abigail?","I remember you helping me stock shelves","and chatting with the regulars.","(And the scent of fresh tobacco.)"],qty:1},{condition:"toppreview3",who:"mom",text:["I love you."],qty:3},{condition:"bottompreview1",who:"mom",text:["do you have any idea what it's like to see your dreams die","because of a single mistake?","because of a single mistake?","because of a single mistake?"],qty:1},{condition:"bottompreview2",who:"mom",text:["I love you.","I love you."],qty:3},{condition:"bottompreview3",who:"mom",text:["I tried to love you, I really did."],qty:5}],click:[{on:"hair2",who:"mom",text:["isn't it a wonderful, bittersweet feeling","when people say we look so much alike?"]},{on:"hair6",who:"mom",text:["this is where I feel closest to my old dreams","singing here in church.","it's not the stage I imagined","but it's a stage nonetheless"]},{on:"bottom2",who:"mom",text:["Yet the cruel, inevitable, and irredeemable truth","is that a mistake is exactly what you are."],qty:2}]};class r extends Phaser.Scene{constructor(){super({key:"Game"})}create(){t.bg=this.add.sprite(640,480,"bg").setPosition(320,240),t.hairbtn=this.add.sprite(640,480,"hairbtn").setPosition(80,130).setInteractive({cursor:"pointer"}),t.hairbtn.on("pointerdown",(()=>{this.onNavClicked("hair")})),t.topsbtn=this.add.sprite(640,480,"topsbtn").setPosition(80,240).setInteractive({cursor:"pointer"}),t.topsbtn.on("pointerdown",(()=>{this.onNavClicked("top")})),t.bottomsbtn=this.add.sprite(640,480,"bottomsbtn").setPosition(80,350).setInteractive({cursor:"pointer"}),t.bottomsbtn.on("pointerdown",(()=>{this.onNavClicked("bottom")})),t.rightPanel=this.add.sprite(640,480,"rightpanel").setPosition(560,220),t.arrowPrev=this.add.sprite(640,480,"arrow").setPosition(530,370).setFlipX(!0).setInteractive({cursor:"pointer"}),t.arrowNext=this.add.sprite(640,480,"arrow").setPosition(590,370).setInteractive({cursor:"pointer"}),t.arrowGail=this.add.sprite(640,480,"arrowgail").setPosition(560,425).setVisible(!1).setInteractive({cursor:"pointer"}),t.arrowNext.on("pointerdown",(()=>{let e=t.currentChar,i=t.currentSection,o=t[e][i];t[e+i+"preview"+o].visible=!1;let r=o+1<=t[e][i+"total"]?o+1:1;t[e+i+"preview"+r].visible=!0,t[e][i]=r,t.showGailBtn||"bottom"!==i||1!=o||(t.arrowGail.visible=!0),this.checkChange("preview")})),t.arrowPrev.on("pointerdown",(()=>{let e=t.currentChar,i=t.currentSection,o=t[e][i];t[e+i+"preview"+o].visible=!1;let r=o>1?o-1:t[e][i+"total"];t[e+i+"preview"+r].visible=!0,t[e][i]=r,this.checkChange("preview")})),t.arrowGail.on("pointerdown",(()=>{t.currentChar="gail",this.onNavClicked("hair"),this.checkChange("preview")})),t.mother=this.add.sprite(640,480,"mother").setPosition(250,248),this.addSet("mom","bottom",214,358,!0),this.addSet("mom","top",236,283,!0),this.addSet("mom","hair",245,95,!0),t.abigail=this.add.sprite(640,480,"abigail").setPosition(380,260),this.addSet("gail","hand",320,152),this.addSet("gail","face",340,95),this.addSet("gail","hair",346,112),this.addSet("gail","top",399,219),this.onNavClicked("hair")}addSet(e,i,o,r,a){let s=e+i,n=t[e][i+"total"];for(let l=1;l<=n;l++)t[s+l]=this.add.sprite(o,r,s+l),1!==l&&(t[s+l].visible=!1),a&&(t[s+"preview"+l]=this.add.sprite(560,220,s+"preview"+l).setInteractive({cursor:"pointer"}),1===l&&"hair"===i||(t[s+"preview"+l].visible=!1),t[s+"preview"+l].on("pointerdown",(()=>{for(let o=1;o<=n;o++)t[e+i+o].visible=o===l;this.checkChange("click")})))}checkChange(e){o[e].forEach((i=>{let o;if("preview"===e?t[i.who+i.condition]._visible&&(o=!0):i.who===t.currentChar&&i.on.replace(/[0-9]/g,"")===t.currentSection&&t[i.who+i.on]._visible&&(o=!0),o){let e=i.qty?i.qty:1;for(let t=0;t<e;t++){let e={backgroundColor:"black",color:"white"};const t=o=>{if(o>=i.text.length)return;let r=this.add.text(0,0,i.text[o],e),a=r.width,s=r.height;r.destroy();let n=Phaser.Math.Between(0,640-a),l=Phaser.Math.Between(0,480-s),h=this.add.text(n,l,i.text[o],e);setTimeout((()=>{h.destroy()}),1e4),setTimeout((()=>{t(o+1)}),3e3)};t(0)}}}))}onNavClicked(e){const i={hair:t.hairbtn,top:t.topsbtn,bottom:t.bottomsbtn};if(t.currentSection!==e){let i=t.currentChar;t.currentSection&&(t[i+t.currentSection+"preview"+t[i][t.currentSection]].visible=!1),t.currentSection=e;let o=t[i][e+"total"];for(let r=1;r<=o;r++)t[i+e+"preview"+r].visible=r===t[i][e]}Object.keys(i).forEach((e=>{i[e].preFX.clear(),t.currentSection!==e&&i[e].preFX.addColorMatrix().negative()})),this.checkChange("preview")}}class a extends Phaser.Scene{constructor(){super({key:"PreLoading"})}preload(){this.load.image("bg","assets/bg.png"),this.load.on("complete",(()=>{this.scene.start("Loading")}))}}new e.Game({type:e.AUTO,width:640,height:480,parent:"container",scene:[a,i,r]});
