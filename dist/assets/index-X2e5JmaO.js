import{P as e}from"./phaser-CmFXOKba.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t={currentChar:"mom",currentSection:"",mom:{hair:1,hairPreview:1,hairtotal:10,top:1,toptotal:6,bottom:1,bottomtotal:6},gail:{hair:1,hairtotal:4,top:1,toptotal:6,bottom:1,bottomtotal:0},btnChangeChar:!1};class i extends Phaser.Scene{constructor(){super({key:"Loading"})}preload(){this.load.image("bg","assets/bg.png"),this.add.sprite(640,480,"bg").setPosition(320,240),this.add.graphics().fillStyle(16777215,1).fillRect(50,190,540,180),this.add.text(320,150,"Abigail's sweet homecoming",{font:"36px monospace",fill:"black",backgroundColor:"white"}).setOrigin(.5,.5).setInteractive({cursor:"pointer"}),this.add.text(70,200,"After spending a few years away from her hometown, 19-year-old Abigail is finally visiting to reunite with her beloved mother. As they prepare for a memorable evening together, help them choose the perfect outfits to make this reunion even more special. Let the dress-up fun begin and create unforgettable memories for this heartwarming homecoming!",{font:"18px monospace",fill:"black",lineSpacing:2,align:"center",wordWrap:{width:540,useAdvancedWrap:!0}});let e=this.add.graphics().fillStyle(2236962,1).fillRect(210,395,220,30),t=this.add.graphics(),i=this.add.text(320,400,"Play",{font:"36px monospace",fill:"#fff",backgroundColor:"black"}).setOrigin(.5,.5).setInteractive({cursor:"pointer"});i.on("pointerdown",(()=>this.scene.start("Game"))),i.setVisible(!1),this.load.on("progress",(function(e){t.clear().fillStyle(16777215,1).fillRect(215,400,210*e,20)})),this.load.on("complete",(function(){t.destroy(),e.destroy(),i.setVisible(!0)})),this.load.image("mother","assets/mom.png"),this.load.image("abigail","assets/gail.png"),this.load.image("hairbtn","assets/interface/hairbtn.png"),this.load.image("topsbtn","assets/interface/topsbtn.png"),this.load.image("bottomsbtn","assets/interface/bottomsbtn.png"),this.load.image("rightpanel","assets/interface/rightpanel.png"),this.load.image("arrow","assets/interface/arrow.png"),this.load.image("arrowgail","assets/interface/arrowgail.png"),this.load.audio("music","assets/interface/LastWaltz.mp3"),this.loadSet("hair","mom"),this.loadSet("top","mom"),this.loadSet("bottom","mom"),this.loadSet("hair","gail"),this.loadSet("top","gail")}loadSet(e,i){let o=t[i][e+"total"];for(var r=1;r<=o;r++)this.load.image(i+e+r,"assets/"+i+"/"+e+r+".png"),this.load.image(i+e+"preview"+r,"assets/"+i+"/"+e+"preview"+r+".png")}}const o={preview:[{condition:"hairpreview1",who:"mom",text:["home sweet home"],qty:1},{condition:"hairpreview6",who:"mom",text:["ah i wish i had curly hair","ah i wish i had curly hair"],qty:1},{condition:"toppreview3",who:"mom",text:["do you have any idea what it's like to see your dreams die","because of a single mistake?","because of a single mistake?","because of a single mistake?"],qty:1}],click:[{on:"hair2",who:"mom",text:["welcome home, Abigail","how was your time away?","your return marks a significant moment for us"],qty:1},{on:"hair3",who:"mom",text:["isn't it a wonderful, bittersweet feeling","when people say we look so much alike?"]},{on:"hair9",who:"mom",text:["this is where I feel closest to my old dreams","singing here in church.","it's not the stage I imagined","but it's a stage nonetheless"]},{on:"top2",who:"mom",text:["did you miss our little shop, Abigail?","I remember you helping me stock shelves","and chatting with the regulars.","(And the scent of fresh tobacco.)"],qty:1},{on:"top6",who:"mom",text:["o Lord hear the cry of a girl","for years of silence and fear","have birthed within her a fury","vast and ancient like the storms of old","grant her solace for her anger is now a tempest beyond words","a grief that knows no comfort","may she find peace in Your embrace","and let her soul be healed","amen"]},{on:"bottom2",who:"mom",text:["I tried to love you, I really did."],qty:6},{on:"bottom4",who:"mom",text:["Yet the cruel, inevitable, and irredeemable truth","is that a mistake is exactly what you are."],qty:2}]};class r extends Phaser.Scene{constructor(){super({key:"Game"})}create(){t.bg=this.add.sprite(640,480,"bg").setPosition(320,240),this.hairbtn=this.add.sprite(640,480,"hairbtn").setPosition(80,130).setInteractive({cursor:"pointer"}),this.hairbtn.on("pointerdown",(()=>{this.onNavClicked("hair")})),this.topsbtn=this.add.sprite(640,480,"topsbtn").setPosition(80,230).setInteractive({cursor:"pointer"}),this.topsbtn.on("pointerdown",(()=>{this.onNavClicked("top")})),this.bottomsbtn=this.add.sprite(640,480,"bottomsbtn").setPosition(80,330).setInteractive({cursor:"pointer"}),this.bottomsbtn.on("pointerdown",(()=>{this.onNavClicked("bottom")})),this.rightPanel1=this.add.sprite(640,480,"rightpanel").setPosition(560,150),this.rightPanel2=this.add.sprite(640,480,"rightpanel").setPosition(560,310),this.arrowPrev=this.add.sprite(640,480,"arrow").setPosition(530,410).setFlipX(!0).setInteractive({cursor:"pointer"}),this.arrowNext=this.add.sprite(640,480,"arrow").setPosition(590,410).setInteractive({cursor:"pointer"}),this.arrowChangeChar=this.add.sprite(640,480,"arrowgail").setPosition(80,410).setInteractive({cursor:"pointer"}),this.changeCharText=this.add.text(70,410,"Gail",{font:"22px monospace",fill:"black"}).setOrigin(.5,.5);const e=this.sound.add("music");e.loop=!0,e.play(),this.sound.pauseOnBlur=!1,this.arrowNext.on("pointerdown",(()=>{let e=t.currentChar,i=t.currentSection,o=t[e][i];t[e+i+"preview"+o].visible=!1,t[e+i+"preview"+(o+1)].visible=!1;let r=o+2<t[e][i+"total"]?o+2:1;t[e+i+"preview"+r].visible=!0,t[e+i+"preview"+(r+1)].visible=!0,t[e][i]=r,t.btnChangeChar||"bottom"!==i||3!=o||(t.btnChangeChar=!0,this.arrowChangeChar.visible=!0),this.checkChange("preview")})),this.arrowPrev.on("pointerdown",(()=>{let e=t.currentChar,i=t.currentSection,o=t[e][i];t[e+i+"preview"+o].visible=!1,t[e+i+"preview"+(o+1)].visible=!1;let r=1===o?t[e][i+"total"]-1:o-2;t[e+i+"preview"+r].visible=!0,t[e+i+"preview"+(r+1)].visible=!0,t[e][i]=r,this.checkChange("preview")})),this.arrowChangeChar.on("pointerdown",(()=>{Object.keys(t).filter((e=>e.includes(t.currentChar+t.currentSection+"preview"))).forEach((e=>t[e].visible=!1)),t.currentSection=null,this.changeCharText.setText(t.currentChar.charAt(0).toUpperCase()+t.currentChar.slice(1)),this.arrowChangeChar.setFlipX(!this.arrowChangeChar.flipX),t.currentChar="mom"==t.currentChar?"gail":"mom",this.onNavClicked("hair"),this.checkChange("preview")})),this.mother=this.add.sprite(640,480,"mother").setPosition(250,248),this.addSet("mom","bottom",248,345),this.addSet("mom","top",238,285),this.addSet("mom","hair",238,99),this.abigail=this.add.sprite(640,480,"abigail").setPosition(383,258),this.addSet("gail","hair",346,112),this.addSet("gail","top",387,263),this.onNavClicked("hair")}addSet(e,i,o,r){let s=e+i,a=t[e][i+"total"];for(let n=1;n<=a;n++)t[s+n]=this.add.sprite(o,r,s+n),1!==n&&(t[s+n].visible=!1),t[s+"preview"+n]=this.add.sprite(560,n%2==0?310:150,s+"preview"+n).setInteractive({cursor:"pointer"}),(n>2||"hair"!==i||"mom"!==e)&&(t[s+"preview"+n].visible=!1),t[s+"preview"+n].on("pointerdown",(()=>{for(let o=1;o<=a;o++)t[e+i+o].visible=o===n;this.checkChange("click")}))}checkChange(e){o[e].forEach((i=>{let o;if("preview"===e?t[i.who+i.condition]._visible&&(o=!0):i.who===t.currentChar&&i.on.replace(/[0-9]/g,"")===t.currentSection&&t[i.who+i.on]._visible&&(o=!0),o){let e=i.qty?i.qty:1;for(let t=0;t<e;t++){let e={backgroundColor:"black",color:"white"};const t=o=>{if(o>=i.text.length)return;let r=this.add.text(0,0,i.text[o],e),s=r.width,a=r.height;r.destroy();let n=Phaser.Math.Between(0,640-s),h=Phaser.Math.Between(0,480-a),l=this.add.text(n,h,i.text[o],e);setTimeout((()=>{l.destroy()}),1e4),setTimeout((()=>{t(o+1)}),3e3)};t(0)}}}))}onNavClicked(e){const i={hair:this.hairbtn,top:this.topsbtn,bottom:this.bottomsbtn};if(t.currentSection!==e){let i=t.currentChar;if(t.currentSection){let e=t[i][t.currentSection]%2==0;t[i+t.currentSection+"preview"+t[i][t.currentSection]].visible=!1;let o=t[i][t.currentSection]+(e?-1:1);t[i+t.currentSection+"preview"+o].visible=!1}t.currentSection=e;let o=t[i][e+"total"];for(let r=1;r<=o;r++)t[i+e+"preview"+r].visible=r-t[i][e]<=1}Object.keys(i).forEach((e=>{i[e].preFX.clear(),t.currentSection!==e&&i[e].preFX.addColorMatrix().negative()})),this.checkChange("preview")}}class s extends Phaser.Scene{constructor(){super({key:"PreLoading"})}preload(){this.load.image("bg","assets/bg.png"),this.load.on("complete",(()=>{this.scene.start("Loading")}))}}new e.Game({type:e.AUTO,width:640,height:480,parent:"container",scene:[s,i,r]});
